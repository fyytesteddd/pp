Fluent, SaveManager, InterfaceManager = loadstring(Game:HttpGet("https://raw.githubusercontent.com/FyyZED/FyyX/refs/heads/main/Liblarry.lua"))()
local Window = Fluent:CreateWindow({
    Title = "Fyy X Fish IT | FREE",
    SubTitle = "by Fyy Community",
    TabWidth = 150,
    Size = UDim2.fromOffset(530, 300),
    Acrylic = true,
    Theme = "Arctic",
    MinimizeKey = Enum.KeyCode.G,
    BackgroundImage = "rbxassetid://78893380921225",
    BackgroundTransparency = 0.4
})

local Options = Fluent.Options
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Setup SaveManager & InterfaceManager
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("FyyScriptHub")
SaveManager:SetFolder("FyyScriptHub/FishIT")

-- Create all tabs directly
local Info = Window:AddTab({Title = "Info", Icon = "info"})
local Premium = Window:AddTab({Title = "Kaitun VIP", Icon = "crown"})
local PlayerTab = Window:AddTab({Title = "Player", Icon = "user"})
local Auto = Window:AddTab({Title = "Main", Icon = "play"})
local Shop = Window:AddTab({Title = "Shop", Icon = "shopping-cart"})
local Teleport = Window:AddTab({Title = "Teleport", Icon = "map-pin"})
local Totem = Window:AddTab({Title = "Totem", Icon = "hexagon"})
local Quest = Window:AddTab({Title = "Quest", Icon = "loader"})
local Event = Window:AddTab({Title = "Event", Icon = "gift"})
local Trade = Window:AddTab({Title = "Trade", Icon = "repeat"})
local Enchant = Window:AddTab({Title = "Enchants", Icon = "star"})
local Animation = Window:AddTab({Title = "Animation", Icon = "gem"})
local Discord = Window:AddTab({Title = "Webhook", Icon = "megaphone"})
local SettingTab = Window:AddTab({Title = "Settings", Icon = "settings"})
local MiscTab = Window:AddTab({Title = "Misc", Icon = "globe"})
local ConfigTab = Window:AddTab({Title = "Config", Icon = "folder"})

InterfaceManager:BuildInterfaceSection(ConfigTab)
SaveManager:BuildConfigSection(ConfigTab)

-- Info Tab
Info:AddParagraph({
    Title = "Welcome!",
    Content = "Script loaded successfully.\nEnjoy using Fyy X Fish IT!"
})

Info:AddParagraph({
    Title = "IMPORTANT!",
    Content = "Have Problem / Need Help? Join Server Now."
})

Info:AddButton({
    Title = "Copy Discord Link",
    Description = "Click to copy Discord invite link",
    Callback = function()
        local success = pcall(function()
            setclipboard("https://discord.gg/77nEeYeFRp")
        end)
        if success then
            Fluent:Notify({
                Title = "Success",
                Content = "Discord link copied to clipboard!\nhttps://discord.gg/77nEeYeFRp",
                Duration = 5
            })
        else
            Fluent:Notify({
                Title = "Error",
                Content = "Failed to copy link to clipboard",
                Duration = 3
            })
        end
    end
})


local P=PlayerTab:AddSection(" [ Player Feature ] ")
local ws=16
local wst=P:AddToggle("WalkSpeedToggle",{Title="WalkSpeed",Default=false})
local wsi=P:AddInput("WalkSpeedInput",{Title="Set WalkSpeed",Default="16",Placeholder="Enter number (e.g. 50)",Numeric=true,Finished=false,Callback=function(v)
ws=tonumber(v)or 16
if Options.WalkSpeedToggle.Value then local c=LocalPlayer.Character if c and c:FindFirstChild("Humanoid")then c.Humanoid.WalkSpeed=ws end end
end})
wst:OnChanged(function(e)local c=LocalPlayer.Character if c and c:FindFirstChild("Humanoid")then c.Humanoid.WalkSpeed=e and ws or 16 end end)
local IJC
local ijt=P:AddToggle("InfiniteJump",{Title="Infinite Jump",Default=false})
ijt:OnChanged(function(e)
local UIS=game:GetService("UserInputService")
if e then IJC=UIS.JumpRequest:Connect(function()local c=LocalPlayer.Character if c and c:FindFirstChild("Humanoid")then c.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)end end)
elseif IJC then IJC:Disconnect()IJC=nil end
end)
local NCC
local nct=P:AddToggle("NoClip",{Title="NoClip",Default=false})
nct:OnChanged(function(e)
if e then NCC=game:GetService("RunService").Stepped:Connect(function()local c=LocalPlayer.Character if c then for _,p in ipairs(c:GetChildren())do if p:IsA("BasePart")then p.CanCollide=false end end end end)
elseif NCC then NCC:Disconnect()NCC=nil local c=LocalPlayer.Character if c then for _,p in ipairs(c:GetChildren())do if p:IsA("BasePart")then p.CanCollide=true end end end end
end)
local wow,wp=false,nil
local wwt=P:AddToggle("WalkOnWater",{Title="Walk On Water",Default=false})
wwt:OnChanged(function(e)
wow=e local c=LocalPlayer.Character
if e and c then local h=c:FindFirstChild("HumanoidRootPart")
if h then if wp then wp:Destroy()end wp=Instance.new("Part")wp.Anchored=true wp.CanCollide=true wp.Size=Vector3.new(20,1,20)wp.Transparency=1 wp.Position=Vector3.new(h.Position.X,0,h.Position.Z)wp.Parent=workspace end
elseif wp then wp:Destroy()wp=nil end
end)
game:GetService("RunService").Heartbeat:Connect(function()if wow and wp then local c=LocalPlayer.Character if c and c:FindFirstChild("HumanoidRootPart")then local p=c.HumanoidRootPart.Position wp.Position=Vector3.new(p.X,0,p.Z)end end end)
local RS=game:GetService("ReplicatedStorage")
local net=RS.Packages._Index["sleitnick_net@0.2.0"].net
local RF_E,RF_U=net["RF/EquipOxygenTank"],net["RF/UnequipOxygenTank"]
local ox=false
local iot=P:AddToggle("EquipOxygenTank",{Title="Equip Oxygen Tank",Default=false})
iot:OnChanged(function(e)ox=e if ox then RF_E:InvokeServer(105)else RF_U:InvokeServer()end end)
local RF_R=net["RF/UpdateFishingRadar"]
local ert=P:AddToggle("BypassFishingRadar",{Title="Bypass Fishing Radar",Default=false})
ert:OnChanged(function(e)RF_R:InvokeServer(e and true or false)end)
local saveCF=nil
LocalPlayer.CharacterAdded:Connect(function(c)if not saveCF then return end local h=c:WaitForChild("HumanoidRootPart",5)if h then task.wait(.3)h.CFrame=saveCF end end)
P:AddButton({Title="Respawn at Current Position",Description="Respawn at your current location",Callback=function()local c=LocalPlayer.Character if not c then return end local h=c:FindFirstChild("HumanoidRootPart")local hu=c:FindFirstChild("Humanoid")if h and hu then saveCF=h.CFrame hu.Health=0 end end})
local G=PlayerTab:AddSection(" [ Gui External ] ")
G:AddButton({Title="Fly GUI",Description="Load Fly GUI",Callback=function()loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt"))()Fluent:Notify({Title="Fly",Content="Fly GUI berhasil dijalankan",Duration=3})end})
local SG,SL=nil,nil
local sot=G:AddToggle("StatsOverlay",{Title="Show Stats Overlay",Description="Menampilkan FPS, CPU(ms), Ping, RAM. (Draggable)",Default=false})
sot:OnChanged(function(e)
if e then if SG then SG:Destroy()end
local g=Instance.new("ScreenGui",game.CoreGui)g.Name="RockHub_Stats"g.IgnoreGuiInset=true
local f=Instance.new("Frame",g)f.Size=UDim2.fromOffset(360,40)f.AnchorPoint=Vector2.new(.5,0)f.Position=UDim2.new(.5,0,.06,0)f.BackgroundColor3=Color3.fromRGB(20,20,20)f.BackgroundTransparency=.2 f.BorderSizePixel=0 f.Active=true f.Selectable=true
Instance.new("UICorner",f).CornerRadius=UDim.new(1,0)
local s=Instance.new("UIStroke",f)s.Color=Color3.fromHex("8B5CF6")s.Thickness=2 s.Transparency=.1 s.ApplyStrokeMode=Enum.ApplyStrokeMode.Border
local db=Instance.new("Frame")db.Name="DragBar"db.Size=UDim2.new(.6,0,0,6)db.Position=UDim2.new(.2,0,1,8)db.BackgroundColor3=Color3.fromRGB(45,45,50)db.BorderSizePixel=0 db.Active=true db.Selectable=true db.Parent=f
local dc=Instance.new("UICorner")dc.CornerRadius=UDim.new(1,0)dc.Parent=db
local ds=Instance.new("UIStroke")ds.Color=Color3.fromHex("8B5CF6")ds.Thickness=1 ds.Parent=db
db.MouseEnter:Connect(function()db.BackgroundColor3=Color3.fromRGB(60,60,65)end)
db.MouseLeave:Connect(function()db.BackgroundColor3=Color3.fromRGB(45,45,50)end)
local ct=Instance.new("Frame")ct.Name="StatsContainer"ct.Size=UDim2.new(1,0,1,0)ct.BackgroundTransparency=1 ct.Parent=f
local l=Instance.new("UIListLayout",ct)l.FillDirection=Enum.FillDirection.Horizontal l.Padding=UDim.new(0,12)l.HorizontalAlignment=Enum.HorizontalAlignment.Center l.VerticalAlignment=Enum.VerticalAlignment.Center
local function L()local t=Instance.new("TextLabel",ct)t.AutomaticSize=Enum.AutomaticSize.X t.Size=UDim2.new(0,0,1,0)t.BackgroundTransparency=1 t.Font=Enum.Font.GothamBold t.TextSize=13 t.TextColor3=Color3.fromRGB(255,255,255)t.Text="..."return t end
local UIS=game:GetService("UserInputService")local CAS=game:GetService("ContextActionService")
local dr,di,dst,stp=false,nil,nil,nil local dan="StatsDragBlocker"
local function upd(i)local d=i.Position-dst f.Position=UDim2.new(stp.X.Scale,stp.X.Offset+d.X,stp.Y.Scale,stp.Y.Offset+d.Y)end
local function std(i)dr=true dst=i.Position stp=f.Position CAS:BindActionAtPriority(dan,function()return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value+50,Enum.UserInputType.Touch,Enum.UserInputType.MouseButton1,Enum.UserInputType.MouseMovement)i.Changed:Connect(function()if i.UserInputState==Enum.UserInputState.End then dr=false CAS:UnbindAction(dan)end end)end
local function cda(o)o.InputBegan:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then std(i)end end)o.InputChanged:Connect(function(i)if i.UserInputType==Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch then di=i end end)end
cda(f)cda(db)
UIS.InputChanged:Connect(function(i)if dr and(i.UserInputType==Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch)then upd(i)end end)
local fps,cpu,ping,ram=L(),L(),L(),L()
local RSv=game:GetService("RunService")local ST=game:GetService("Stats")
SL=RSv.RenderStepped:Connect(function(dt)
if not g then return end
local f=math.floor(workspace:GetRealPhysicsFPS())local c=math.floor(dt*1000)local p=math.floor(ST.Network.ServerStatsItem["Data Ping"]:GetValue())local m=math.floor(ST:GetTotalMemoryUsageMb())
fps.Text="FPS: "..f fps.TextColor3=f>=50 and Color3.fromRGB(0,255,127)or Color3.fromRGB(255,65,65)
cpu.Text="CPU: "..c.."ms"cpu.TextColor3=c<=20 and Color3.fromRGB(0,255,127)or(c<=50 and Color3.fromRGB(255,215,0)or Color3.fromRGB(255,65,65))
ping.Text="Ping: "..p.."ms"ping.TextColor3=p<100 and Color3.fromRGB(0,255,127)or Color3.fromRGB(255,65,65)
ram.Text="Mem: "..m.."MB"
end)
SG=g
else if SL then SL:Disconnect()SL=nil end if SG then SG:Destroy()SG=nil end end
end)


local instantSection=Auto:AddSection(" [ Instant Fishing ] ")
local RS=game:GetService("ReplicatedStorage")
local P=game:GetService("Players").LocalPlayer
local REE=RS.Packages._Index["sleitnick_net@0.2.0"].net["RE/EquipToolFromHotbar"]
local RFC=RS.Packages._Index["sleitnick_net@0.2.0"].net["RF/ChargeFishingRod"]
local RFS=RS.Packages._Index["sleitnick_net@0.2.0"].net["RF/RequestFishingMinigameStarted"]
local REF=RS.Packages._Index["sleitnick_net@0.2.0"].net["RE/FishingCompleted"]
local RFK=RS.Packages._Index["sleitnick_net@0.2.0"].net["RF/CancelFishingInputs"]
local d=1.3
local run=false
local eq=false
local aid="rbxassetid://114959536562596"
local at,hum=nil,nil
local function sF(r,a)if not r then return false end return pcall(function()if a~=nil then r:FireServer(a)else r:FireServer()end end)end
local function sI(r,a,b)if not r then return nil end local ok,res=pcall(function()if a~=nil and b~=nil then return r:InvokeServer(a,b)elseif a~=nil then return r:InvokeServer(a)else return r:InvokeServer()end end)return ok and res end
local function play()if not P.Character then return end hum=P.Character:FindFirstChildOfClass("Humanoid")if not hum then return end local an=Instance.new("Animation")an.AnimationId=aid at=hum:LoadAnimation(an)if at then at:Play()end end
local function stop()if at then at:Stop()at=nil end hum=nil end
local function equip()while run do if not eq then sF(REE,1)eq=true end task.wait(2)end eq=false end
local function cycle()while run do sI(RFK)local t=os.time()+os.clock()pcall(function()RFC:InvokeServer(t)end)sI(RFS,-139.630452165,0.99647927980797)task.wait(d)if not run then break end sF(REF)task.wait(.4)if not run then break end end end
local function start()play()task.spawn(equip)task.wait(.05)task.spawn(cycle)end
local autoFishingToggle=instantSection:AddToggle("autoFishing",{Title="Instant Fishing",Default=false})
autoFishingToggle:OnChanged(function(s)run=s if run then task.spawn(start)else sI(RFK)stop()eq=false end end)
local fishingDelaySlider=instantSection:AddSlider("fishingDelay",{Title="Completed Delay",Min=0.1,Max=5,Default=1.3,Rounding=1})
fishingDelaySlider:OnChanged(function(v)d=v end)
P.CharacterAdded:Connect(function()if run then task.wait(1)play()end end)
game:GetService("UserInputService").WindowFocused:Connect(function()if not run and at then stop()end end)

local blatantSection1=Auto:AddSection(" [ Blatant V1 ] ")
local run=false
local loopT,eqT=nil,nil
local cDelay=3.1
local kDelay=.3
local interval=1.8
local loopIntervalInput=blatantSection1:AddInput("loopInterval",{Title="Recast Delay",Default=tostring(interval),Placeholder="1.8"})
loopIntervalInput:OnChanged(function(v)local n=tonumber(v)if n and n>=0 then interval=n end end)
local completeDelayInput=blatantSection1:AddInput("completeDelay",{Title="Complete Delay",Default=tostring(cDelay),Placeholder="3.1"})
completeDelayInput:OnChanged(function(v)local n=tonumber(v)if n and n>0 then cDelay=n end end)
local RS=game:GetService("ReplicatedStorage")
local R={"Packages","_Index","sleitnick_net@0.2.0","net"}
local function GR(n)local c=RS for _,p in ipairs(R)do c=c:WaitForChild(p,2)end return c and c:FindFirstChild(n)end
local RFC=GR("RF/ChargeFishingRod")
local RFS=GR("RF/RequestFishingMinigameStarted")
local REF=GR("RE/FishingCompleted")
local RFK=GR("RF/CancelFishingInputs")
local REE=GR("RE/EquipToolFromHotbar")
local function cast()if not run then return end task.spawn(function()local st=os.clock()local ts=os.time()+os.clock()pcall(function()RFC:InvokeServer(ts)end)task.wait(.05)pcall(function()RFS:InvokeServer(-139.6379699707,0.99647927980797)end)local w=cDelay-(os.clock()-st)if w>0 then task.wait(w)end pcall(function()REF:FireServer()end)task.wait(kDelay)pcall(function()RFK:InvokeServer()end)end)end
local blatantModeToggle=blatantSection1:AddToggle("blatantMode",{Title="Enable Blatant Mode",Default=false})
blatantModeToggle:OnChanged(function(s)run=s if s then if loopT then task.cancel(loopT)end loopT=task.spawn(function()while run do cast()task.wait(interval)end end)if eqT then task.cancel(eqT)end eqT=task.spawn(function()while run do pcall(function()REE:FireServer(1)end)task.wait(1)end end)else if loopT then task.cancel(loopT)loopT=nil end if eqT then task.cancel(eqT)eqT=nil end pcall(function()REE:FireServer(0)end)end end)

local blatantSection2=Auto:AddSection(" [ Blatant V2 ] ")
local RS=game:GetService("ReplicatedStorage")
local net=RS:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
local RFC=net:WaitForChild("RF/ChargeFishingRod")
local RFS=net:WaitForChild("RF/RequestFishingMinigameStarted")
local RFK=net:WaitForChild("RF/CancelFishingInputs")
local RFU=net:WaitForChild("RF/UpdateAutoFishingState")
local REF=net:WaitForChild("RE/FishingCompleted")
local REM=net:WaitForChild("RE/FishingMinigameChanged")
local Equip=net:WaitForChild("RE/EquipToolFromHotbar")
local Unequip=net:WaitForChild("RE/UnequipToolFromHotbar")
local active=false
local fishingThread=nil
local equipThread=nil
local casts=0
local start=0
local CD=.002
local FD=.7
local KD=.3
local function safe(f)task.spawn(function()pcall(f)end)end
local Players=game:GetService("Players")
local LocalPlayer=Players.LocalPlayer
local function fishingLoop()while active do local t=tick()safe(function()RFC:InvokeServer({[1]=t})end)task.wait(CD)local r=tick()safe(function()RFS:InvokeServer(1,0,r)end)casts+=1 task.wait(FD)safe(function()REF:FireServer()end)task.wait(KD)safe(function()RFK:InvokeServer()end)end end
local function equipLoop()while active do safe(function()Equip:FireServer(1)end)task.wait(1)end safe(function()Unequip:FireServer()end)end
REM.OnClientEvent:Connect(function()if not active then return end task.spawn(function()task.wait(FD)safe(function()REF:FireServer()end)task.wait(KD)safe(function()RFK:InvokeServer()end)end)end)
local blatantV2CompleteDelayInput=blatantSection2:AddInput("blatantV2_completeDelay",{Title="Complete Delay",Default=tostring(FD),Placeholder=tostring(FD)})
blatantV2CompleteDelayInput:OnChanged(function(v)local n=tonumber(v)if n and n>=0 then FD=n end end)
local blatantV2CancelDelayInput=blatantSection2:AddInput("blatantV2_cancelDelay",{Title="Cancel Delay",Default=tostring(KD),Placeholder=tostring(KD)})
blatantV2CancelDelayInput:OnChanged(function(v)local n=tonumber(v)if n and n>=0 then KD=n end end)
local blatantV2Toggle=blatantSection2:AddToggle("blatantV2_toggle",{Title="Enable Blatant V2",Default=false})
blatantV2Toggle:OnChanged(function(s)active=s if s then casts=0 start=tick()pcall(function()LocalPlayer:SetAttribute("InCutscene",true)end)safe(function()RFU:InvokeServer(true)end)fishingThread=task.spawn(fishingLoop)equipThread=task.spawn(equipLoop)else if fishingThread then task.cancel(fishingThread)fishingThread=nil end if equipThread then task.cancel(equipThread)equipThread=nil end safe(function()RFU:InvokeServer(false)end)safe(function()Unequip:FireServer()end)task.wait(.2)safe(function()RFK:InvokeServer()end)end end)

local blatantSection3=Auto:AddSection(" [ Blatant V3 (BETA) ] ")
local RS=game:GetService("ReplicatedStorage")
local net=RS:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
local RFC=net:WaitForChild("RF/ChargeFishingRod")
local RFS=net:WaitForChild("RF/RequestFishingMinigameStarted")
local RFK=net:WaitForChild("RF/CancelFishingInputs")
local RFU=net:WaitForChild("RF/UpdateAutoFishingState")
local REF=net:WaitForChild("RE/FishingCompleted")
local REM=net:WaitForChild("RE/FishingMinigameChanged")
local Equip=net:WaitForChild("RE/EquipToolFromHotbar")
local Unequip=net:WaitForChild("RE/UnequipToolFromHotbar")
local RE_Fish=net:WaitForChild("RE/ObtainedNewFishNotification")

local active=false
local fishingThread=nil
local equipThread=nil
local monitorThread=nil
local casts=0
local start=0
local CD=.001
local FD=.68
local KD=.299
local lastFishTime=0

local function safe(f)task.spawn(function()pcall(f)end)end
local Players=game:GetService("Players")
local LocalPlayer=Players.LocalPlayer

RE_Fish.OnClientEvent:Connect(function()
    lastFishTime=tick()
end)

local function fishingLoop()
    while active do 
        local t = tick()
        safe(function() RFC:InvokeServer({[1] = t}) end)
        task.wait(CD)
        local r = tick()
        safe(function() RFS:InvokeServer(1, 0, r) end)
        casts += 1 
        local t2 = tick()
        safe(function() RFC:InvokeServer({[1] = t2}) end)
        task.wait(CD)
        local r2 = tick()
        safe(function() RFS:InvokeServer(1, 0, r2) end)
        casts += 1 
        local t3 = tick()
        safe(function() RFC:InvokeServer({[1] = t3}) end)
        task.wait(CD)
        local r3 = tick()
        safe(function() RFS:InvokeServer(1, 0, r3) end)
        casts += 1 
        task.wait(FD)
        safe(function() REF:FireServer() end)
        task.wait(KD)
        safe(function() RFK:InvokeServer() end)
        
    end 
end

local function equipLoop()
    while active do 
        safe(function()Equip:FireServer(1)end)
        task.wait(100)
    end 
    safe(function()Unequip:FireServer()end)
end

local function antiStuckLoop()
    while active do
        if tick() - lastFishTime > 5 then
            -- Reset logic
            lastFishTime = tick() -- Prevent spam resetting
            if fishingThread then task.cancel(fishingThread) end
            safe(function()RFK:InvokeServer()end)
            safe(function()RFK:InvokeServer()end) 
            safe(function()RFK:InvokeServer()end)  
            task.wait(0.001)
            safe(function()Equip:FireServer(1)end) 
            task.wait(1.5)
            fishingThread = task.spawn(fishingLoop) -- Restart loop
        end
        task.wait(0.1)
    end
end

REM.OnClientEvent:Connect(function()
    if not active then return end 
    task.spawn(function()
        task.wait(FD)
        safe(function()REF:FireServer()end)
        task.wait(KD)
        safe(function()RFK:InvokeServer()end)
    end)
end)

local blatantV3CastDelayInput=blatantSection3:AddInput("blatantV3_castDelay",{Title="Cast Delay",Default=tostring(CD),Placeholder=tostring(CD)})
blatantV3CastDelayInput:OnChanged(function(v)local n=tonumber(v)if n and n>=0 then CD=n end end)
local blatantV3CompleteDelayInput=blatantSection3:AddInput("blatantV3_completeDelay",{Title="Complete Delay",Default=tostring(FD),Placeholder=tostring(FD)})
blatantV3CompleteDelayInput:OnChanged(function(v)local n=tonumber(v)if n and n>=0 then FD=n end end)
local blatantV3CancelDelayInput=blatantSection3:AddInput("blatantV3_cancelDelay",{Title="Cancel Delay",Default=tostring(KD),Placeholder=tostring(KD)})
blatantV3CancelDelayInput:OnChanged(function(v)local n=tonumber(v)if n and n>=0 then KD=n end end)

local blatantV3Toggle=blatantSection3:AddToggle("blatantV3_toggle",{Title="Enable Blatant V3",Default=false})
blatantV3Toggle:OnChanged(function(s)
    active=s 
    if s then 
        casts=0 
        start=tick()
        lastFishTime=tick()
        pcall(function()LocalPlayer:SetAttribute("InCutscene",true)end)
        safe(function()RFU:InvokeServer(true)end)
        fishingThread=task.spawn(fishingLoop)
        equipThread=task.spawn(equipLoop)
        monitorThread=task.spawn(antiStuckLoop)
    else 
        if fishingThread then task.cancel(fishingThread) fishingThread=nil end 
        if equipThread then task.cancel(equipThread) equipThread=nil end 
        if monitorThread then task.cancel(monitorThread) monitorThread=nil end
        safe(function()RFU:InvokeServer(false)end)
        safe(function()Unequip:FireServer()end)
        task.wait(.2)
        safe(function()RFK:InvokeServer()end)
    end 
end)


local Autosell=Auto:AddSection(" [ Auto Sell Feature ] ")

local RS=game:GetService("ReplicatedStorage")
local P=game:GetService("Players").LocalPlayer

local pkg=RS:WaitForChild("Packages"):WaitForChild("_Index")
local net=nil
if pkg:FindFirstChild("sleitnick_net@0.2.0")then
 net=pkg["sleitnick_net@0.2.0"]:WaitForChild("net")
elseif pkg:FindFirstChild("cemstone_net@0.2.1")then
 net=pkg["cemstone_net@0.2.1"]:WaitForChild("net")
end

local RF=net["RF/SellAllItems"]
local RE=net["RE/ObtainedNewFishNotification"]

local on=false
local mode="Delay"
local val=50
local loop=nil
local cnt=0
local conn=nil

local function sell()
 if not RF then return false end
 return pcall(function()RF:InvokeServer()end)
end

local function listen()
 if not RE then return false end
 if conn then conn:Disconnect()conn=nil end
 conn=RE.OnClientEvent:Connect(function()
  cnt+=1
  if mode=="Count"and on and cnt>=val then
   if sell()then cnt=0 end
  end
 end)
 return true
end

local function start()
 if loop then task.cancel(loop)end
 loop=task.spawn(function()
  while on do
   if mode=="Delay"then
    sell()
    for _=1,val do if not on then break end task.wait(1)end
   else task.wait(1)end
  end
 end)
end

local sellModeDropdown=Autosell:AddDropdown("sellMode",{
 Title="Sell Mode",
 Values={"Delay","Count"},
 Default="Delay"
})
sellModeDropdown:OnChanged(function(v)
 mode=v cnt=0
 if on then
  if v=="Count"then listen()else start()end
 end
end)

local sellValueInput=Autosell:AddInput("sellValue",{
 Title="Value",
 Default="50",
 Placeholder="50"
})
sellValueInput:OnChanged(function(t)
 local n=tonumber(t)
 if n and n>0 then val=n end
end)

local autoSellToggle=Autosell:AddToggle("autoSell",{
 Title="Enable Auto Sell",
 Default=false
})
autoSellToggle:OnChanged(function(s)
 on=s
 if s then
  if mode=="Count"then
   listen()
  else
   start()
  end
 else
  if conn then conn:Disconnect()conn=nil end
  cnt=0
  if loop then task.cancel(loop)loop=nil end
 end
end)

Autosell:AddButton({
 Title="Sell Now",
 Callback=function()sell()end
})
